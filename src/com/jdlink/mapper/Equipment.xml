<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jdlink.mapper.EquipmentMapper" >
    <!--查询当天的设备运行情况-->
    <select id="getEquipment" resultType="EquipmentItem">
        select equipment,runningTime,stopTime,stopResult,note from t_rp_equipmentchild where documentNumber = #{documentNumber};
    </select>

    <!--网页列表数据-->
    <select id="listEquipment" resultType="EquipmentDate">
        select distinct documentNumber,creator,dayTime,createDept,editor,editTime,note from t_rp_equipment;
    </select>

    <!--新增设备-->
    <insert id="addEquipment" parameterType="EquipmentDate">
        insert into t_rp_equipment (documentNumber,note,dayTime,creator,createDept,editTime,editor)
        values (#{documentNumber},#{note},#{dayTime},#{creator},#{createDept},#{editTime},#{editor})
    </insert>
    <!--新增设备明细-->
    <insert id="addEquipmentItem" parameterType="EquipmentItem">
   insert into t_rp_equipmentchild(equipment, runningTime, stopTime, stopResult, documentNumber) values
   (#{equipment},#{runningTime},#{stopTime},#{stopResult},#{documentNumber})
    </insert>
    <!--查找最新的单据号-->
    <select id="getNewestId" resultType="String">
        select documentNumber from  t_rp_equipment order by  documentNumber desc ;
    </select>
</mapper>