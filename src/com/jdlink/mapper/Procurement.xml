<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jdlink.mapper.ProcurementMapper" >
   <!--添加采购-->
    <insert id="add" parameterType="Procurement">
        insert into t_pl_procurement(receiptNumber, applyMouth, demandTime, applyDepartment, proposer, divisionHead, purchasingDirector, generalManager, id1, procurementCategory,nowTIme)
      values (#{receiptNumber},#{applyMouth},#{demandTime},#{applyDepartment},#{proposer},#{divisionHead},#{purchasingDirector},#{generalManager},#{id1},#{procurementCategory},NOW());
    </insert>
    <!--寻找最新的采购主键-->
    <select id="getNewestId" resultType="String">
        select receiptNumber from t_pl_procurement order  by receiptNumber desc;
    </select>
    <!--添加物料表-->
    <insert id="addMaterial" parameterType="Material">
        insert into t_pl_material (suppliesName, specifications, inventory, note, purchaseQuantity, demandQuantity, receiptNumber)
        values (#{suppliesName},#{specifications},#{inventory},#{note},#{purchaseQuantity},#{demandQuantity},#{receiptNumber});
    </insert>
</mapper>