<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>审批流管理</title>
    <script src="js/jquery/2.0.0/jquery.min.js"></script>
    <script src="js/jquery/2.0.0/jquery.serializejson.js"></script>
    <script src="js/jquery/jquery.validate.min.js"></script>
    <script src="js/jquery/additional-methods.js"></script>
    <script src="js/jquery/messages_zh.js"></script>
    <link href="css/bootstrap/3.3.6/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
    <link href="css/dashboard.css" rel="stylesheet">
    <link href="css/validation.css" rel="stylesheet">
    <script type="text/javascript" src="js/bootstrap/bootstrap-datetimepicker.js" charset="UTF-8"></script>
    <script src="js/bootstrap/3.3.6/bootstrap.min.js"></script>
    <script src="js/bootstrap/bootstrap-datetimepicker.zh-CN.js"></script>
    <script src="js/time.js"></script>
    <script src="js/util.js"></script>
    <link href="css/dropdown-submenu.css" rel="stylesheet">
    <link href="css/bootstrap/navbar.css" rel="stylesheet">
    <script src="js/bootstrap/navbar.js"></script>
</head>
<body onload="loadNavigationList();">
    <!--导航条-->
    <nav class="navbar navbar-inverse navbar-fixed-top float" id="navbar1" style="height: 50px;">
        <div class="main-title">
            <ul class="nav navbar-nav navbar-left navbar-side">
                <li>
                    <a href="#" onclick="$('body').toggleClass('sidebar-collapse');" style="width: 50px">
                        <span class="glyphicon glyphicon-menu-hamburger"></span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="container navbar-left" style="width: 900px;">
            <div class="navbar-header">
                <a class="navbar-brand" href="#"><img src="image/logo2.png"></a>
            </div>
            <div id="navbar" class="collapse navbar-collapse" style="margin-left: 150px;">
                <ul class="nav navbar-nav">
                    <li><a href="businessModel.html">首页</a></li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">产废单位管理<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="clientBackup.html" id="function_48" onclick="checkAuthority($(this))">产废单位备案</a></li>
                            <li role="separator" class="divider"></li>
                            <li class="dropdown-submenu">
                                <a href="#">业务员分配管理</a>
                                <ul class="dropdown-menu">
                                    <li><a href="salesManage.html" id="function_80" onclick="checkAuthority($(this))">业务员管理</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="clientSalesManage.html" id="function_81" onclick="checkAuthority($(this))">产废单位分配管理</a></li>
                                </ul>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li><a href="questionnaireManage.html" id="function_50" onclick="checkAuthority($(this))">危废数据调查表管理</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="sampleInfo.html" id="function_51" onclick="checkAuthority($(this))">产废单位样品登记</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="wayBill1.html" id="function_52" onclick="checkAuthority($(this))">接运单管理</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">供应商管理<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="supplierBackup.html" id="function_15" onclick="checkAuthority($(this))">供应商备案</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">合同管理<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="contractManage.html" id="function_54" onclick="checkAuthority($(this))">合同列表</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="contractTemplate.html" id="function_55" onclick="checkAuthority($(this))">合同模板</a></li>
                        </ul>
                    </li>
                    <!--<li class="dropdown">-->
                        <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">价格管理<span class="caret"></span></a>-->
                        <!--<ul class="dropdown-menu">-->
                            <!--<li><a href="quotation.html" id="function_57" onclick="checkAuthority($(this))">报价管理</a></li>-->
                            <!--<li role="separator" class="divider"></li>-->
                            <!--<li><a href="cost.html" id="function_58" onclick="checkAuthority($(this));">成本管理</a></li>-->
                        <!--</ul>-->
                    <!--</li>-->
                    <li><a href="archivesManage.html" id="function_18" onclick="checkAuthority($(this));">一企一档</a></li>
                    <li><a href="stockManage.html" id="function_19" onclick="checkAuthority($(this));">库存申报</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
        <ul class="nav navbar-nav navbar-right">
            <li><a href="#" title="提醒"><span class="glyphicon glyphicon-bell"></span></a></li>
            <li><a href="#" title="事项"><span class="glyphicon glyphicon-envelope"></span></a></li>
            <li class="dropdown">
                <a href="#" title="我的" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-user"></span></a>
                <ul class="dropdown-menu">
                    <li><a href="personalInformation.html">个人信息</a></li>
                    <li><a href="#">待办事项</a></li>
                    <li><a href="#" onclick="showLog();">登录日志</a></li>
                    <li><a href="admin.html">注销</a></li>
                </ul>
            </li>
        </ul>

    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="sidebar">
                <!--<h4>博客管理系统(四月)</h4>-->
                <!--<div class="cover">-->
                <!--<h4><img class="img-circle" src="image/icons.png"/></h4>-->
                <!--<b>Hi~ 小主</b>-->
                <!--<p>超级管理员</p>-->
                <!--</div>-->
                <ul class="sidenav animated fadeInUp">
                    <!--<li><a href="#"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></a></li>-->
                    <li><a class="withripple" href="wastesPlatform.html" id="function_1" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-list" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;系统概览 </span><span class="iright pull-right">&gt;</span><span class="sr-only">(current)</span></a></li>
                    <li><a class="withripple" href="businessModel.html" id="function_2" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-user" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;商务管理 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="compatibilityPlan.html" id="function_3" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-list" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;配伍计划 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="receiveManagement.html" id="function_4" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-log-in" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;接收管理 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="storageManagement.html" id="function_5" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-save" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;贮存管理 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="preprocessingManagement.html" id="function_6" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-sort-by-attributes-alt" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;预备管理 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="dispositionManagement.html" id="function_7" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-retweet" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;处置管理 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="secondaryManagement.html" id="function_8" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-tags" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;次生管理 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="procurementManagement.html" id="function_9" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-indent-right" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;采购管理 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="reportManagement.html" id="function_10" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;报表管理 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li><a class="withripple" href="basicData.html" id="function_11" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-signal" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;基础数据 </span><span class="iright pull-right">&gt;</span></a></li>
                    <li class="active"><a class="withripple" href="infrastructure.html" id="function_12" onclick="checkAuthority($(this))"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span><span class="sidespan">&nbsp;&nbsp;系统设置 </span><span class="iright pull-right">&gt;</span></a></li>
                </ul>
            </div>
        </div>

        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <!--面包屑导航-->
            <div>
                <ol class="breadcrumb">
                    <li><a href="">系统设置</a></li>
                    <li class="active">审批流管理</li>
                </ol>
            </div>
            <h4 class="sub-header">审批流配置</h4>
            <div class="row">
                <div>
                    <!--操作按钮-->
                    <div class="pull-left col-md-6">
                        <a class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 新增</a>
                        <a class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span> 导入</a>
                        <a class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span> 导出</a>
                    </div>
                    <!--查询框-->
                    <div class="input-group col-md-4 pull-right">
                        <input type="text" class="form-control" placeholder="搜索..." id="searchContent">
                        <span class="input-group-btn">
                            <a class="btn btn-default" onclick="searchApproval();"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> 查询</a>
                            <a class="btn btn-default" onclick="$('#senior').toggle();"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> 高级查询</a>
                            <a class="btn btn-default" onclick="reset();"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> 重置</a>
                        </span>
                    </div>
                </div>
            </div>
            <br>
            <div class="panel panel-default" id="senior" style="display: none;">
                <div class="panel-body">
                    <div class="row">
                        <div class="form-horizontal col-md-4">
                            <div class="form-group">
                                <label for="search_id" class="col-sm-4 control-label">主键</label>
                                <div class="col-xs-7">
                                    <input type="text" class="form-control" id="search_id" name="id" placeholder="" onkeyup="searchApproval();">
                                </div>
                            </div>
                        </div>
                        <div class="form-horizontal col-md-4">
                            <div class="form-group">
                                <label for="search_type" class="col-sm-4 control-label">审批流类型</label>
                                <div class="col-xs-7">
                                    <input type="text" class="form-control" id="search_type" name="type" placeholder="" onkeyup="searchApproval();">
                                </div>
                            </div>
                        </div>
                        <div class="form-horizontal col-md-4">
                            <div class="form-group">
                                <label for="search_approvalNodeList" class="col-sm-4 control-label">审批节点</label>
                                <div class="col-xs-7">
                                    <input class="form-control" name="approvalNodeList" id="search_approvalNodeList" onkeyup="searchApproval();">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-horizontal col-md-4">
                            <div class="form-group">
                                <label for="search_creationDate" class="col-sm-4 control-label">创建日期</label>
                                <div class="col-xs-7">
                                    <input type="date" class="form-control" id="search_creationDate" name="creationDate" placeholder="" onkeyup="searchApproval();">
                                </div>
                            </div>
                        </div>
                        <div class="form-horizontal col-md-4">
                            <div class="form-group">
                                <label for="search_creator" class="col-sm-4 control-label">创建人</label>
                                <div class="col-xs-7">
                                    <input class="form-control" name="creator" id="search_creator" onchange="searchApproval()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="table">
                <table class="table table-striped table-hover table-condensed">
                    <thead>
                    <tr>
                        <th class="text-center">
                            <label>
                                <input class="checkbox" type="checkbox" value="option1" aria-label="..." name="allSel" id="allSel" onclick="allSelect()">
                            </label>
                        </th>
                        <th class="text-center">主键</th>
                        <th class="text-center">单据号</th>
                        <th class="text-center">审批流类型</th>
                        <th class="text-center">审批节点</th>
                        <th class="text-center">创建日期</th>
                        <th class="text-center">创建人</th>
                        <th class="text-center">操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr id="cloneTr">
                        <td class="text-center">
                            <label>
                                <input name="select" class="checkbox" type="checkbox" id="blankCheckbox" value="option1" aria-label="...">
                            </label>
                        </td>
                        <td class="text-center"></td>
                        <td class="text-center"></td>
                        <td class="text-center"></td>
                        <td class="text-center"></td>
                        <td class="text-center"></td>
                        <td class="text-center"></td>
                        <td class="dropdown text-center">
                            <a href="#" title="查看"><span class="glyphicon glyphicon glyphicon-search" aria-hidden="true"></span></a>
                            <a href="#" title="编辑"><span class="glyphicon glyphicon glyphicon-pencil" aria-hidden="true"></span></a>
                            <a href="#" title="删除"><span class="glyphicon glyphicon glyphicon-remove" aria-hidden="true"></span></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <!--分页-->
            <nav aria-label="Page navigation" style="text-align: center">
                <ol class="pagination" style="width: 900px;">
                    <li id="current" style="display: none"><a href="#"></a></li>
                    <li id="firstPage">
                        <a href='#' onclick="switchPage(0)">首 页</a>
                    </li>
                    <li id="previous">
                        <a href="#" aria-label="Previous">
                            <span aria-hidden="true" onclick="switchPage(parseInt(currentPage)-1);"><span class="glyphicon glyphicon-backward" aria-hidden="true"></span></span>
                        </a>
                    </li>
                    <li><a href="#">1</a></li>
                    <li id="next">
                        <a href="#" aria-label="Next">
                            <span aria-hidden="true" onclick="switchPage(parseInt(currentPage)+1);"><span class="glyphicon glyphicon-forward" aria-hidden="true"></span></span>
                        </a>
                    </li>
                    <li id="endPage">
                        <a href='#' onclick="switchPage(-2)">尾 页</a>
                    </li>
                    <li ><a id="totalPage"></a></li>
                    <li ><a href="#" onclick="inputSwitchPage()">跳转</a></li>
                    <li ><input type="text" class="text-center inputText" maxlength="4" style="width:50px; height:34px;" id="pageNumber"></li>
                    <li class="showLi">每页显示:</li>
                    <li class="selectLi">
                        <select id="count" onchange="loadPageQuestionnaireList()">
                            <option>5</option>
                            <option selected>15</option>
                            <option>50</option>
                        </select>
                    </li>
                </ol>
            </nav>
        </div>
    </div>

    <!--编辑模态框-->
    <div class="modal fade" id="importExcelModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="TitleMyModalLabel">审批节点</h4>
                </div>
                <div class="modal-body">
                    <table class="table table-bordered">
                        <!--<thead style="border:none">-->
                        <thead>
                        <tr>
                            <th>审批流ID</th>
                            <!--<th class="hidden">收样日期</th>-->
                            <th>角色ID</th>
                        </tr>
                        </thead>
                        <tbody >
                        <tr id="cloneTr2" class="myclass3" >
                            <td><input class="form-control" name="approvalProcessId" >
                            </td>
                            <!--<td><input class="form-control hidden" name="produceCompany" type="date"></td>-->
                            <td><select class="form-control" name="roleId" ></select></td>
                            <!--<td><input class="form-control" name="wastesCode" ></td>-->

                            <td class="hidden"></td>
                        </tr>
                        <tr id="plus">
                            <td>
                                <a class="btn btn-default btn-xs" onclick="addNewLine1(this);"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a>
                            </td>
                            <td></td>
                            <!--<td></td>-->
                            <!--<td></td>-->
                            <!--<td></td>-->
                            <!--<td></td>-->
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer center">
                    <button type="button" class="btn btn-primary">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <div id="embed"></div>
</body>
<!--分页格式-->
<style type="text/css">
    .pagination > li {
        display: inline;
    }
    table th, table td {
        vertical-align: middle!important;
    }
</style>
<script type="text/javascript">

    function addNewLine1(item) {

        // 获取id为plusBtn的tr元素
        //var tr = $("#plusBtn").prev();
        var tr = $(item).parent().parent().prev();
        // 克隆tr，每次遍历都可以产生新的tr
        var clonedTr = tr.clone();
        $(clonedTr).children('td').eq(0).find('p').hide()
        clonedTr.attr('class', 'myclass3');
        clonedTr.show();
        clonedTr.children().find("input").val("");
        var delBtn = "<a class='btn btn-default btn-xs' onclick='delLine(this);'><span class='glyphicon glyphicon-minus' aria-hidden='true'></span></a>";


        clonedTr.children('td').eq(0).find("a").remove();
        clonedTr.children('td').eq(0).append(delBtn)


        clonedTr.insertAfter(tr);
        clonedTr.removeAttr("id");
    }

    $("#examineBtn1").click(
        function () {
            $("#approval").modal('show');
        }
    );

    $('#embed').load('embed/loginLogModal.html');
    /**
     * 聚焦输入框
     * @param e
     */
    function focusInput(e) {
        // console.log("you click the td!");
        e.firstChild.focus();
    }
    function clearQuestionnaire() {
        $.ajax({
            type: 'POST',
            url: 'client/clearCurrentQuestionnaire',
            async: false,
            dataType: 'json',
            success: function (result) {
                console.log("信息清空");
            },
            error: function (result) {
                console.log("清空失败");
            }
        });
    }
</script>
</html>