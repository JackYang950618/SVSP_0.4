<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>客户新增</title>
    <script src="/js/jquery/2.0.0/jquery.min.js"></script>
    <script src="/js/jquery/2.0.0/jquery.serializejson.js"></script>
    <link href="/css/bootstrap/3.3.6/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap/bootstrap-select.min.css" type="text/css" rel="stylesheet">
    <script src="/js/bootstrap/3.3.6/bootstrap.min.js"></script>
    <script src="/js/data-format.js"></script>
    <script src="js/bootstrap/bootstrap-select.min.js"></script>
    <script src="js/bootstrap/defaults-zh_CN.min.js"></script>
    <link href="/css/dashboard.css" rel="stylesheet">
</head>
<script>
    $(window).on('load', function () {
        // 中文重写select 查询为空提示信息
        $('.selectpicker').selectpicker({
            language: 'zh_CN',
            style: 'btn-info',
            size: 4
        });
    });
    function setClientData() {
        $.ajax({
            type: "POST",                            // 方法类型
            url: "getCurrentQuestionnaireId",                       // url
            async : false,                           // 同步：意思是当有返回值以后才会进行后面的js程序
            dataType: "json",
            success: function (result) {
                if (result != undefined) {
//                    console.log(result);
                    if (result.status == "success") {
                        $("#questionnaireId").val(result.questionnaireId);
                    } else { }
                }
            },
            error:function (result) {
                console.log(result);
                alert("服务器异常!");
            }
        });
        $("#time").val(getNowDate());
    }
</script>
<body onload="setClientData()">
    <!--导航条-->
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">产废服务平台</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="wastesPlatform.html">首页</a></li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">客户管理<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">客户备案</a></li>
                            <li role="separator" class="divider"></li>
                            <li class="dropdown-submenu">
                                <a href="#">业务员分配管理</a>
                                <ul class="dropdown-menu">
                                    <li><a href="salesManage.html">业务员管理</a></li>
                                    <li role="separator" class="divider"></li>
                                    <li><a href="clientSalesManage.html">客户分配管理</a></li>
                                </ul>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li><a href="questionnaireManage.html">危废数据调查表管理</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="sampleManage.html">客户样品登记</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">供应商管理<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="supplierBackup.html">供应商备案</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">合同管理<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="contractManage.html">合同列表</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="contractTemplate.html">合同模板</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">价格管理<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="quotation.html">报价管理</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="cost.html">成本管理</a></li>
                        </ul>
                    </li>
                    <li><a>一企一档</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-user"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#">个人信息</a></li>
                            <li><a href="#">待办事项</a></li>
                            <li><a href="index.html">注销</a></li>
                        </ul>
                    </li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-3 col-md-2 sidebar">
                <ul class="nav nav-sidebar">
                    <li><a href="wastesPlatform.html">概览</a></li>
                    <li class="active"><a href="#">商务管理 <span class="sr-only">(current)</span></a></li>
                    <li><a href="#">接收管理</a></li>
                    <li><a href="#">贮存管理</a></li>
                    <li><a href="#">预处理管理</a></li>
                    <li><a href="#">处置管理</a></li>
                    <li><a href="#">次生管理</a></li>
                    <li><a href="#">基础数据</a></li>
                    <li><a href="#">系统设置</a></li>
                </ul>
            </div>
        </div>

        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <div class="row">
                <ol class="breadcrumb">
                    <li><a href="businessModel.html">商务管理</a></li>
                    <li><a href="#">价格管理</a></li>
                    <li><a href="quotation.html">报价管理</a></li>
                    <li class="active">新增报价单</li>
                </ol>
            </div>
            <h2 class="sub-header">客户报价单</h2>
            <form method="post" id="page1Info" enctype="multipart/form-data">
                <div class="row">
                    <div class="form-horizontal col-md-6">
                    </div>
                    <div class="form-horizontal col-md-6">
                        <div class="form-group" align="right">
                            <label class="col-sm-4 control-label">报价单号</label>
                            <div class="col-xs-5">
                                <input type="text" class="form-control" name="quotationId" id="quotationId" value="********" style="border: none" readonly>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label for="quotationType" class="col-sm-4 control-label">类型</label>
                            <div class="col-xs-5">
                                <select class="selectpicker input-xlarge form-control" data-live-search="true" id="quotationType" name="quotationType"></select>
                            </div>
                        </div>
                    </div>
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label for="clientName" class="col-sm-4 control-label">客户名称</label>
                            <div class="col-xs-5">
                                <input type="text" class="form-control" id="clientName" name="clientName" placeholder="--请选择--">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label for="clientContactName" class="col-sm-4 control-label">客户联系人</label>
                            <div class="col-xs-5">
                                <input type="text" class="form-control" id="clientContactName" name="clientContactName" placeholder="">
                            </div>
                        </div>
                    </div>
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label for="clientPhone" class="col-sm-4 control-label">联系人电话</label>
                            <div class="col-xs-5">
                                <input type="text" class="form-control" id="clientPhone" name="clientPhone" placeholder="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label for="author" class="col-sm-4 control-label">报价人</label>
                            <div class="col-xs-5">
                                <input type="text" class="form-control" id="author" name="author" placeholder="填报人姓名">
                            </div>
                        </div>
                    </div>
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label for="department" class="col-sm-4 control-label">报价部门</label>
                            <div class="col-xs-5">
                                <input type="text" class="form-control" id="department" name="department" placeholder="填报人部门">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label for="takeEffect" class="col-sm-4 control-label">报价生效日期</label>
                            <div class="input-group date form_datetime" data-date="" data-date-format="" data-link-field="dtp_input1" id="time1">
                                <input class="form-control" type="text" value="" id="takeEffect" name="takeEffect" readonly>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                            </div>
                        </div>
                    </div>
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label for="loseEffect" class="col-sm-4 control-label">报价失效日期</label>
                            <div class="input-group date form_datetime" data-date="" data-date-format="" data-link-field="dtp_input2" id="time2">
                                <input class="form-control" type="text" value="" id="loseEffect" name="loseEffect" readonly>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                                <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label class="col-sm-4 control-label">含税</label>
                            <div class="col-xs-5">
                                <input type="radio" name="tax">是
                                <input type="radio" name="tax">否
                            </div>
                        </div>
                    </div>
                    <div class="form-horizontal col-md-6">
                        <div class="form-group">
                            <label class="col-sm-4 control-label">是否含运输费</label>
                            <div class="col-xs-5">
                                <input type="radio" name="transport">是
                                <input type="radio" name="transport">否
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <table style="width: 100%;height: 100%;border: 1px">
                        <tr>
                            <td>费用项名称</td>
                            <td>对外报价名称</td>
                            <td>单位</td>
                            <td>去税价</td>
                            <td>选择币制</td>
                            <td>备注</td>
                        </tr>
                        <tr>
                            <td><input type="text"></td>
                            <td><input type="text"></td>
                            <td>
                                <select class="selectpicker input-xlarge form-control" data-live-search="true" id="company" name="company"></select>
                            </td>
                            <td>
                                <input type="text">
                            </td>
                            <td>
                                <select class="selectpicker input-xlarge form-control" data-live-search="true" id="currency" name="currency"></select>
                            </td>
                            <td>
                                <input type="text">
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="row text-center">
                    <a class="btn btn-primary" onclick="savePage1Info();">确认</a>
                    <a class="btn btn-danger" href="quotation.html">返回</a>
                </div>
            </form>
        </div>
    </div>
</body>
<script type="text/javascript">
    /**
     * 添加报价单
     */
    function addQuatation() {
        console.log($("#quotationId").text());
        $.ajax({
            type: "POST",                            // 方法类型
            url: "addQuotation",                 // url
            async : false,                           // 同步：意思是当有返回值以后才会进行后面的js程序
            data: {
                'quotationId': $("#quotationId").find("option:selected").val(),
                'quotationType': $("#quotationType").val(),
                'clientName': $("#clientName").val(),
                'clientContactName':$("#clientContactName").val(),
                'clientPhone':$("#clientPhone").val(),
                'author':$("#author").val(),
                'department':$("#department").val(),
                'takeEffect': $("#takeEffect").val(),
                'loseEffect': $("#loseEffect").val(),
                'comment': $("#model-comment").val()
            },
            dataType: "json",
            success: function (result) {
                console.log(result);
                if (result != undefined) {
                    var data = eval(result);
                    if (data.status == "success") {
                        alert(data.message);
                        window.location.reload();
                    } else {
                        alert(data.message);
                    }
                }
            },
            error:function (result) {
                console.dir(result);
                alert("服务器异常!");
            }
        });
    }
</script>
</html>